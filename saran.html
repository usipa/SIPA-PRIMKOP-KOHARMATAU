<!DOCTYPE html>
<html lang="id">
<head>
    <!-- Konfigurasi dasar untuk tampilan responsif -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saran & Masukan Anggota</title>
    <!-- Memuat Tailwind CSS untuk styling modern dan responsif -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Mengatur font default Inter (sans-serif) */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styling untuk background image, menggunakan URL placeholder yang sama */
        .background-image {
            background-image: url('https://placehold.co/1920x1080/0d9488/ffffff?text=Background+Primkopau');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-color: #f7f7f7;
        }
        /* Style untuk tombol utama (Submit) agar terlihat datar dan biru */
        .submit-button {
            @apply px-4 py-2 text-sm font-medium rounded-sm text-white bg-blue-500 hover:bg-blue-600 transition duration-150;
        }
        /* Style untuk tombol Kembali (netral) */
        .back-button {
            @apply px-4 py-2 text-sm font-medium rounded-sm text-gray-800 bg-gray-200 hover:bg-gray-300 transition duration-150;
        }
    </style>
</head>
<body class="background-image min-h-screen flex flex-col items-center justify-center p-4">

    <!-- Kontainer Formulir (Card Sederhana) -->
    <div class="w-full max-w-lg p-8 bg-white rounded-md shadow-lg text-center">
        
        <header class="mb-6">
            <h1 class="text-xl font-bold text-blue-700 mb-2 leading-snug">
                Formulir Saran & Masukan
            </h1>
            <p class="text-sm text-gray-600 px-4">
                Sampaikan saran Anda untuk peningkatan layanan Primkopau Koharmatau.
            </p>
        </header>

        <!-- Formulir Saran -->
        <form id="suggestionForm" action="https://script.google.com/macros/s/AKfycbyty0B9Ge0TDpmbX7K8yfq7Kce7RYykk2zC5AKBaiD-rT9Zpf2h4f4s9AaH8BfIFgz_aA/exec" method="POST" class="space-y-4">
            
            <textarea 
                id="Saran" 
                name="Saran"
                rows="6"
                placeholder="Tulis saran Anda di sini..."
                class="w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-sm resize-none"
                required
            ></textarea>

            <div class="flex flex-col sm:flex-row justify-center space-y-2 sm:space-y-0 sm:space-x-2">
                <!-- Tombol Submit Saran -->
                <button type="submit" id="submitButton" class="submit-button">
                    Kirim Saran
                </button>
                
                <!-- Tombol Kembali ke Halaman Utama -->
                <a href="index.html" class="back-button flex items-center justify-center">
                    Kembali
                </a>
            </div>
            
        </form>

        <!-- Area untuk menampilkan pesan setelah pengiriman -->
        <div id="responseMessage" class="mt-4 p-3 text-sm text-green-700 bg-green-100 border border-green-300 rounded-md hidden">
            <!-- Pesan sukses akan muncul di sini -->
        </div>

    </div>

    <script>
        // Fungsi untuk menangani pengiriman formulir menggunakan Fetch API
        document.getElementById('suggestionForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Mencegah submit default

            const form = event.target;
            const actionUrl = form.action;
            const submitButton = document.getElementById('submitButton');
            const messageArea = document.getElementById('responseMessage');
            
            // Menampilkan loading state
            submitButton.disabled = true;
            submitButton.textContent = 'Mengirim...';
            messageArea.classList.add('hidden');
            messageArea.classList.remove('text-red-700', 'bg-red-100', 'border-red-300', 'text-green-700', 'bg-green-100', 'border-green-300');


            const formData = new FormData(form);
            
            // Mengirim data menggunakan Fetch API
            fetch(actionUrl, {
                method: 'POST',
                body: formData,
            })
            .then(response => {
                // Apps Script sering mengembalikan HTML atau teks
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.text();
            })
            .then(responseText => {
                // Menampilkan pesan sukses
                messageArea.textContent = 'Saran berhasil dikirim! ' + responseText;
                messageArea.classList.remove('hidden');
                messageArea.classList.add('text-green-700', 'bg-green-100', 'border-green-300');
                form.reset(); // Mengosongkan formulir
            })
            .catch(error => {
                // Menampilkan pesan error
                messageArea.textContent = 'Gagal mengirim saran. Pastikan Apps Script Web App sudah di-deploy dengan benar.';
                messageArea.classList.remove('hidden');
                messageArea.classList.add('text-red-700', 'bg-red-100', 'border-red-300');
                console.error('Error submitting form:', error);
            })
            .finally(() => {
                // Mengembalikan tombol ke keadaan semula
                submitButton.disabled = false;
                submitButton.textContent = 'Kirim Saran';
            });
        });
    </script>
</body>
</html>
